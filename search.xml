<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>hexo自动构建</title>
      <link href="/archives/undefined.html"/>
      <url>/archives/undefined.html</url>
      
        <content type="html"><![CDATA[<h2 id="hexo自动构建">hexo自动构建</h2><h3 id="1-需求描述：">1.需求描述：</h3><p>构建工具一堆，vercel也能构建，但是我服务器有国内的，我希望自己部署在自己服务器上，自动构建比较难，所以用github action生成静态后，由服务器通过git拉取。如果嫌弃github慢。可以试试的方法，不建议用gitee。</p><h3 id="2-整体描述">2.整体描述:</h3><p>Github action负责生成静态代码，并执行curl 的post请求指定服务器的接口，服务器接受请求后拉取静态文件。</p><p>或者直接Github action发送curl 的post请求指定服务器的接口，然后服务器通过源码自己构建（不建议）</p><h3 id="3-Github-action-自动构建">3.Github action 自动构建</h3><h3 id="4-服务器post请求文件">4.服务器post请求文件</h3><h4 id="4-1-php版本">4.1 php版本</h4><p>服务器post请求文件(php消耗少，暂定。虽然java一个方法就解决了，但是为了这一个方法不合适)</p><h4 id="4-2-java版本">4.2 java版本</h4><h3 id="5-在线文档编写">5.在线文档编写</h3><p>建议使用:   <a href="https://hexoplusplus.js.org/">hexoplusplus</a></p><p>好好看看文配置有点多: <a href="https://hexoplusplus.js.org/start/">官方文档</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github加速</title>
      <link href="/archives/e1b2e985.html"/>
      <url>/archives/e1b2e985.html</url>
      
        <content type="html"><![CDATA[<p>#主页地址：</p><h6 id="https-gh-mikuo-workers-dev"><a href="https://gh.mikuo.workers.dev/">https://gh.mikuo.workers.dev/</a></h6><p>看到最近有更新就重弄了一下<br>可以自己搭建，亲测不错。</p><h2 id="使用方法示例：">使用方法示例：</h2><h5 id="git-clone">git clone</h5><p>git clone <a href="https://gh.mikuo.workers.dev/https://github.com/stilleshan/ServerStatus">https://gh.mikuo.workers.dev/https://github.com/stilleshan/ServerStatus</a></p><h5 id="wget-curl">wget &amp; curl</h5><h5 id="wget-https-gh-mikuo-workers-dev-https-github-com-stilleshan-ServerStatus-archive-master-zip">wget <a href="https://gh.mikuo.workers.dev/https://github.com/stilleshan/ServerStatus/archive/master.zip">https://gh.mikuo.workers.dev/https://github.com/stilleshan/ServerStatus/archive/master.zip</a></h5><h5 id="wget-https-gh-mikuo-workers-dev-https-raw-githubusercontent-com-stilleshan-ServerStatus-master-Dockerfile">wget <a href="https://gh.mikuo.workers.dev/https://raw.githubusercontent.com/stilleshan/ServerStatus/master/Dockerfile">https://gh.mikuo.workers.dev/https://raw.githubusercontent.com/stilleshan/ServerStatus/master/Dockerfile</a></h5><h5 id="curl-O-https-gh-mikuo-workers-dev-https-github-com-stilleshan-ServerStatus-archive-master-zip">curl -O <a href="https://gh.mikuo.workers.dev/https://github.com/stilleshan/ServerStatus/archive/master.zip">https://gh.mikuo.workers.dev/https://github.com/stilleshan/ServerStatus/archive/master.zip</a></h5><h5 id="curl-O-https-gh-mikuo-workers-dev-https-raw-githubusercontent-com-stilleshan-ServerStatus-master-Dockerfile">curl -O <a href="https://gh.mikuo.workers.dev/https://raw.githubusercontent.com/stilleshan/ServerStatus/master/Dockerfile">https://gh.mikuo.workers.dev/https://raw.githubusercontent.com/stilleshan/ServerStatus/master/Dockerfile</a></h5><p>基于https://github.com/hunshcn/gh-proxy cloudfare版本<br>说明：克隆地址为 <a href="https://github.com/stilleshan/ServerStatus.git">https://github.com/stilleshan/ServerStatus.git</a> 应该改为<br><a href="https://github.com/stilleshan/ServerStatus">https://github.com/stilleshan/ServerStatus</a> （即去掉.git）<br>速度测试：速度能跑满50m的带宽，最高能到7Mb/s多<br>仓库较大<br>git clone <a href="https://gh.mikuo.workers.dev/https://github.com/cxw9/video-Bed">https://gh.mikuo.workers.dev/https://github.com/cxw9/video-Bed</a></p><p><img src="https://mikuo.top/wp-content/uploads/2021/05/YP_NYFY2Q62QJ699-300x109.png" alt=""></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>python FastApi 快速做api接口</title>
      <link href="/archives/6f4f205b.html"/>
      <url>/archives/6f4f205b.html</url>
      
        <content type="html"><![CDATA[<h1>python FastApi 快速做api接口</h1><p>首先需要安装模块如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pip install fastapi</span><br><span class="line">pip install uvicorn</span><br><span class="line">运行代码</span><br><span class="line"></span><br><span class="line">import uvicorn as uvicorn</span><br><span class="line">from fastapi import FastAPI</span><br><span class="line">from pydantic import BaseModel</span><br><span class="line">app = FastAPI()  # 必须实例化该类，启动的时候调用</span><br><span class="line">class People(BaseModel):  # 必须继承</span><br><span class="line">    name: str</span><br><span class="line">    age: int</span><br><span class="line">    address: str</span><br><span class="line">    salary: float</span><br></pre></td></tr></table></figure><h1>请求根目录</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.get(&#x27;/&#x27;)</span><br><span class="line">def index():</span><br><span class="line">    return &#123;&#x27;message&#x27;: &#x27;欢迎来到FastApi 服务！&#x27;&#125;</span><br></pre></td></tr></table></figure><h1>get请求带参数数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.get(&#x27;/items/&#123;item_id&#125;&#x27;)</span><br><span class="line">def items(item_id: int):</span><br><span class="line">    return &#123;&#x27;message&#x27;: &#x27;欢迎来到接口页面&#x27;&#125;</span><br></pre></td></tr></table></figure><h1>post请求带参数数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@app.post(&#x27;/people&#x27;)</span><br><span class="line">def insert(people: People):</span><br><span class="line">    age = people.age</span><br><span class="line">    msg = f&#x27;名字：&#123;people.name&#125;，年龄：&#123;age&#125;&#x27;</span><br><span class="line">    return &#123;&#x27;success&#x27;: True, &#x27;msg&#x27;: msg&#125;</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    uvicorn.run(app=app, host=&quot;127.0.0.1&quot;, port=8080)</span><br></pre></td></tr></table></figure><p>运行命令</p><p>uvicorn main:app --reload<br>快速文档</p><p><a href="http://127.0.0.1:8000/docs">http://127.0.0.1:8000/docs</a><br><a href="http://127.0.0.1:8000/redoc">http://127.0.0.1:8000/redoc</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>自动同步到github</title>
      <link href="/archives/53d9f3fb.html"/>
      <url>/archives/53d9f3fb.html</url>
      
        <content type="html"><![CDATA[<h2 id="首先">首先</h2><p>确保你有git 没有的话 安装一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><h3 id="1-设置全局用户名">1.设置全局用户名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;你的GitHub用户名&quot;</span><br></pre></td></tr></table></figure><h3 id="2-设置全局邮箱">2.设置全局邮箱</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;你的GitHub邮箱&quot;</span><br></pre></td></tr></table></figure><h3 id="3设置完毕后，您可以用下面的命令来修正本次提交所使用的用户身份：-（设置正确的话用不到）">3设置完毕后，您可以用下面的命令来修正本次提交所使用的用户身份：   （设置正确的话用不到）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend --reset-author</span><br></pre></td></tr></table></figure><h3 id="4生成公钥和私钥">4生成公钥和私钥</h3><p>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;你的GitHub邮箱&quot;</span><br></pre></td></tr></table></figure><p>连按三下回车</p><h3 id="5复制公钥到github">5复制公钥到github</h3><p>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>复制上面公钥内容到</p><p>github的settings→SSH and GPG keys→New SSH key</p><h3 id="6给与脚本权限">6给与脚本权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x up.sh</span><br></pre></td></tr></table></figure><h3 id="脚本内容">脚本内容</h3><p>执行脚本之前应该测试下克隆自己的github仓库因为.ssh 中少一个文件  例如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:cxw9/cdn.git  </span><br></pre></td></tr></table></figure><p>日志</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Cloning into &#x27;cdn&#x27;...</span><br><span class="line">The authenticity of host &#x27;github.com (140.82.113.4)&#x27; can&#x27;t be established.</span><br><span class="line">RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.</span><br><span class="line">RSA key fingerprint is MD5:16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &#x27;github.com,140.82.113.4&#x27; (RSA) to the list of known hosts.</span><br><span class="line">remote: Enumerating objects: 5143, done.</span><br><span class="line">remote: Counting objects: 100% (30/30), done.</span><br><span class="line">remote: Compressing objects: 100% (28/28), done.</span><br><span class="line">remote: Total 5143 (delta 3), reused 28 (delta 1), pack-reused 5113</span><br><span class="line">Receiving objects: 100% (5143/5143), 385.48 MiB | 6.86 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (558/558), done.</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><p>脚本 /www/cdn 替换为你的位置 可能需要给 /www/cdn  权限 chmod 777 /www/cdn (一般不用)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /www/cdn </span><br><span class="line">git add .</span><br><span class="line">time3=$(date &quot;+%Y-%m-%d %H:%M:%S&quot;)</span><br><span class="line">git commit -m &quot;$time3&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>git push origin master  可以写为  git push 两者区别在于 一个通过 <a href="mailto:git@github.com">git@github.com</a>:cxw9/uploads.git</p><p>一个通过 <a href="https://github.com/cxw9/uploads.git">https://github.com/cxw9/uploads.git</a>  (?)</p><h2 id="可能遇到的问题">可能遇到的问题</h2><h3 id="1">1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> fatal: Not a git repository (or any of the parent directories): .git </span><br><span class="line"></span><br><span class="line">提示说没有.git这样一个目录</span><br><span class="line"></span><br><span class="line">在命令行 输入 git init 然后回车就好了</span><br><span class="line"></span><br><span class="line">如果确实存在 .git 可能是linux权限问题</span><br></pre></td></tr></table></figure><h3 id="2">2</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Linux中解决cannot access ‘\r’: No such file or directory</span><br><span class="line">碰到这种情况，是因为脚本文件在windows环境下编辑过后再上传到linux服务器导致换行符格式不对。使用dos2unix命令行即可解决。</span><br><span class="line"></span><br><span class="line">进入root用户后，使用yum install dos2unix。</span><br><span class="line"></span><br><span class="line">安装完成后使用命令 dos2unix start.sh 其中start.sh为出问题的脚本文件名，也可以使用*通配符来同时修改多个，或者使用空格隔开文件名的方式。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-脚本位置不建议放网站目录下-不要让别人能访问到。">3 脚本位置不建议放网站目录下 不要让别人能访问到。</h3><h3 id="4宝塔脚本定时任务无法执行">4宝塔脚本定时任务无法执行</h3><p>一次在脚本里写这两句:</p><p>git config --global <a href="http://user.name">user.name</a> “your name here”</p><p>git config --global user.email “your <a href="mailto:email@example.com">email@example.com</a>”</p><p>报错为</p><p>fatal: $HOME not set</p><p>最终的解决办法为将上述两行改为</p><p>git config --system user.email “your name here”<br>git config --system <a href="http://user.name">user.name</a> “your <a href="mailto:email@example.com">email@example.com</a>”</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>直接爬取360图片链接</title>
      <link href="/archives/d49b7c14.html"/>
      <url>/archives/d49b7c14.html</url>
      
        <content type="html"><![CDATA[<h1>直接爬取360图片链接</h1><h4 id="最后用了最简单的-joy">最后用了最简单的:joy:</h4><p>写的有别的版本也有,但是这个最简单(还能简化,没做，我也不用这种方式)，也不会出错，更没有复杂的检查等。</p><h2 id="要求：">要求：</h2><h3 id="python3-python3自带sqlite3">python3(python3自带sqlite3)</h3><h4 id="直接上代码">直接上代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 接口 http://wallpaper.apc.360.cn/index.php?c=WallPaper&amp;a=getAppsByCategory&amp;cid=【分类ID】&amp;start=【0开始】&amp;count=【加载数】&amp;from=360chrome</span></span><br><span class="line"><span class="comment"># http://wallpaper.apc.360.cn/index.php?c=WallPaper&amp;a=getAppsByCategory&amp;cid=10&amp;start=0&amp;count=1&amp;from=360chrome</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createTables</span>():</span></span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;360img.db&#x27;</span>)</span><br><span class="line">    <span class="comment"># 创建游标</span></span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    <span class="comment"># 创建表</span></span><br><span class="line">    sql = <span class="string">&#x27;CREATE TABLE text10(mid integer PRIMARY KEY autoincrement, data TEXT)&#x27;</span></span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    <span class="comment"># 提交事物</span></span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># createTables() #创建数据库时使用</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insertTables</span>(<span class="params">d</span>):</span></span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;360img.db&#x27;</span>)</span><br><span class="line">    <span class="comment"># 创建游标</span></span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    <span class="comment"># 插入数据</span></span><br><span class="line">    sql1 = <span class="string">&quot;INSERT INTO text10(data) VALUES(&#x27;&#123;&#125;&#x27;)&quot;</span></span><br><span class="line">    sql = sql1.<span class="built_in">format</span>(<span class="built_in">str</span>(d))</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提交事物</span></span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conUrl</span>():</span></span><br><span class="line">    start = <span class="number">0</span></span><br><span class="line">    f1 = <span class="built_in">open</span>(<span class="string">&quot;text10.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> index, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(f1):</span><br><span class="line">        start += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    payload = &#123;<span class="string">&#x27;c&#x27;</span>: <span class="string">&#x27;WallPaper&#x27;</span>, <span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;getAppsByCategory&#x27;</span>, <span class="string">&#x27;cid&#x27;</span>: <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;start&#x27;</span>: start, <span class="string">&#x27;count&#x27;</span>: <span class="string">&#x27;200&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;360chrome&#x27;</span>&#125;</span><br><span class="line">    r = requests.get(<span class="string">&#x27;http://wallpaper.apc.360.cn/index.php&#x27;</span>, params=payload)</span><br><span class="line">    <span class="comment"># 获取json的data字段</span></span><br><span class="line">    jsData = r.json()[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;text10.txt&quot;</span>, <span class="string">&#x27;a+&#x27;</span>, encoding=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> jsData:</span><br><span class="line">        strS = <span class="built_in">str</span>(i).replace(<span class="string">&#x27;\&#x27;&#x27;</span>, <span class="string">&#x27;\&quot;&#x27;</span>)  <span class="comment"># 字符串转json</span></span><br><span class="line">        dictJson = json.loads(strS)  <span class="comment"># 字符串转字典</span></span><br><span class="line">        <span class="comment"># 字典获取所有 k,values</span></span><br><span class="line">        strI = <span class="built_in">str</span>(i) + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> strI <span class="keyword">not</span> <span class="keyword">in</span> f.readline():</span><br><span class="line">            f.write(<span class="built_in">str</span>(i) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            insertTables(strS)</span><br><span class="line"></span><br><span class="line">conUrl() <span class="comment">#用for循环先注释掉</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 定时执行 暂时取消  用 循环执行</span></span><br><span class="line"><span class="string">def timGo():</span></span><br><span class="line"><span class="string">    count = 0</span></span><br><span class="line"><span class="string">    for i in range(10):</span></span><br><span class="line"><span class="string">        count += 1</span></span><br><span class="line"><span class="string">        conUrl()</span></span><br><span class="line"><span class="string">        print(&quot;执行次数&quot; + str(count))</span></span><br><span class="line"><span class="string">        time.sleep(10)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">timGo()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>npm无法加载文件xx,因为在此系统上禁止运行脚本</title>
      <link href="/archives/269aaa9e.html"/>
      <url>/archives/269aaa9e.html</url>
      
        <content type="html"><![CDATA[<p>一、npm : 无法加载文件 (你的nodejs路径)\npm.ps1，因为在此系统上禁止运行脚本。我遇到的是webstorm 的npm 命令行经常无法运行npm install<br>二、因为在此系统上禁止运行脚本</p><ol><li>get-ExecutionPolicy 查看权限<br>get-ExecutionPolicy<br>1<br>2.输出：Restricted ：受限制的<br>Restricted<br>1<br>3.Restricted 表示状态是禁止的，那就给个权限：<br>Set-ExecutionPolicy -Scope CurrentUser<br>1<br>4.输入：RemoteSigned<br>RemoteSigned<br>1<br>验证一下：<br>get-ExecutionPolicy<br>1<br>显示：RemoteSigned 就可以了</li></ol><p>运行 npm run install 可以执行</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>爬取360图片链接</title>
      <link href="/archives/7399c5ba.html"/>
      <url>/archives/7399c5ba.html</url>
      
        <content type="html"><![CDATA[<h1>爬取360图片链接</h1><p>最后用了最简单的 写的有别的版本也有,但是这个最简单(还能简化,没做，我也不用这种方式)，也不会出错，更没有复杂的检查等。 要求： python3(python3自带sqlite3)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 接口 http://wallpaper.apc.360.cn/index.php?c=WallPaper&amp;a=getAppsByCategory&amp;cid=【分类ID】&amp;start=【0开始】&amp;count=【加载数】&amp;from=360chrome</span></span><br><span class="line"><span class="comment"># http://wallpaper.apc.360.cn/index.php?c=WallPaper&amp;a=getAppsByCategory&amp;cid=10&amp;start=0&amp;count=1&amp;from=360chrome</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createTables</span>():</span></span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;360img.db&#x27;</span>)</span><br><span class="line">    <span class="comment"># 创建游标</span></span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    <span class="comment"># 创建表</span></span><br><span class="line">    sql = <span class="string">&#x27;CREATE TABLE text10(mid integer PRIMARY KEY autoincrement, data TEXT)&#x27;</span></span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    <span class="comment"># 提交事物</span></span><br><span class="line">    conn.commit()</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># createTables() #创建数据库时使用</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insertTables</span>(<span class="params">d</span>):</span></span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;360img.db&#x27;</span>)</span><br><span class="line">    <span class="comment"># 创建游标</span></span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    <span class="comment"># 插入数据</span></span><br><span class="line">    sql1 = <span class="string">&quot;INSERT INTO text10(data) VALUES(&#x27;&#123;&#125;&#x27;)&quot;</span></span><br><span class="line">    sql = sql1.<span class="built_in">format</span>(<span class="built_in">str</span>(d))</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 提交事物</span></span><br><span class="line">    conn.commit()</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conUrl</span>():</span></span><br><span class="line">    start = <span class="number">0</span></span><br><span class="line">    f1 = <span class="built_in">open</span>(<span class="string">&quot;text10.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> index, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(f1):</span><br><span class="line">        start += <span class="number">1</span></span><br><span class="line"> </span><br><span class="line">    payload = &#123;<span class="string">&#x27;c&#x27;</span>: <span class="string">&#x27;WallPaper&#x27;</span>, <span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;getAppsByCategory&#x27;</span>, <span class="string">&#x27;cid&#x27;</span>: <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;start&#x27;</span>: start, <span class="string">&#x27;count&#x27;</span>: <span class="string">&#x27;200&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;360chrome&#x27;</span>&#125;</span><br><span class="line">    r = requests.get(<span class="string">&#x27;http://wallpaper.apc.360.cn/index.php&#x27;</span>, params=payload)</span><br><span class="line">    <span class="comment"># 获取json的data字段</span></span><br><span class="line">    jsData = r.json()[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;text10.txt&quot;</span>, <span class="string">&#x27;a+&#x27;</span>, encoding=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> jsData:</span><br><span class="line">        strS = <span class="built_in">str</span>(i).replace(<span class="string">&#x27;\&#x27;&#x27;</span>, <span class="string">&#x27;\&quot;&#x27;</span>)  <span class="comment"># 字符串转json</span></span><br><span class="line">        dictJson = json.loads(strS)  <span class="comment"># 字符串转字典</span></span><br><span class="line">        <span class="comment"># 字典获取所有 k,values</span></span><br><span class="line">        strI = <span class="built_in">str</span>(i) + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> strI <span class="keyword">not</span> <span class="keyword">in</span> f.readline():</span><br><span class="line">            f.write(<span class="built_in">str</span>(i) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            insertTables(strS)</span><br><span class="line"> </span><br><span class="line">conUrl() <span class="comment">#用for循环先注释掉</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 定时执行 暂时取消  用 循环执行</span></span><br><span class="line"><span class="string">def timGo():</span></span><br><span class="line"><span class="string">    count = 0</span></span><br><span class="line"><span class="string">    for i in range(10):</span></span><br><span class="line"><span class="string">        count += 1</span></span><br><span class="line"><span class="string">        conUrl()</span></span><br><span class="line"><span class="string">        print(&quot;执行次数&quot; + str(count))</span></span><br><span class="line"><span class="string">        time.sleep(10)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">timGo()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python裁剪图片</title>
      <link href="/archives/dbc0c148.html"/>
      <url>/archives/dbc0c148.html</url>
      
        <content type="html"><![CDATA[<h1>Python裁剪图片</h1><h2 id="个人适用版本">个人适用版本</h2><p><strong>800x400 裁剪后符合大小</strong></p><p><strong>1920x400 裁剪后符合比例</strong></p><p><strong>配合imgbot 自动压缩无需处理压缩</strong></p><p><strong>cdn by jsdeliver</strong></p><h4 id="待实现链接自动注入到文章"><strong>待实现链接自动注入到文章</strong></h4><p>链接url 分别放在 max.txt mid.txt min.txt</p><p>文件夹 max（原图） mid（比例为1920x400）  min（大小为800x400）</p><p>代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mpath = os.getcwd()</span></span><br><span class="line"><span class="comment"># print(Mpath)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 原来文件夹</span></span><br><span class="line">source_dirs = <span class="string">&#x27;./max&#x27;</span></span><br><span class="line"><span class="comment"># 目标文件夹</span></span><br><span class="line">target_dirs = <span class="string">&#x27;./mid&#x27;</span></span><br><span class="line"><span class="comment"># 目标文件夹2</span></span><br><span class="line">target_dirs2 = <span class="string">&#x27;./min&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到图片的链接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getListFiles</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="keyword">assert</span> os.path.isdir(path), <span class="string">&#x27;%s not exist.&#x27;</span> % path</span><br><span class="line">    ret = []</span><br><span class="line">    <span class="comment"># 已经有的文件夹</span></span><br><span class="line">    has_dirs = []</span><br><span class="line">    <span class="comment"># 目录创建</span></span><br><span class="line">    <span class="comment"># 暂时有一个文件夹下多文件 读取问题没 解决 dirs files均为列表  已经解决</span></span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(path):</span><br><span class="line">        <span class="comment"># print(&#x27;%s, %s, %s&#x27; % (root, dirs, files))</span></span><br><span class="line">        <span class="comment"># print(&#x27;%s, %s&#x27; % (dirs,files))</span></span><br><span class="line">        s = <span class="string">&#x27;&#x27;</span>.join(root) + <span class="string">&#x27;/&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(dirs)</span><br><span class="line">        <span class="keyword">if</span> s <span class="keyword">not</span> <span class="keyword">in</span> has_dirs:</span><br><span class="line">            has_dirs.append(s)</span><br><span class="line">        <span class="keyword">if</span> path == source_dirs:</span><br><span class="line">            create_dirs(has_dirs)</span><br><span class="line">        <span class="keyword">for</span> filesPath <span class="keyword">in</span> files:</span><br><span class="line">            ret.append(os.path.join(root, filesPath))</span><br><span class="line">    <span class="comment"># print(ret)</span></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建不存在文件夹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_dirs</span>(<span class="params">has_dirs</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> has_dirs:</span><br><span class="line">        i = i.replace(source_dirs, target_dirs)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(i):</span><br><span class="line">            os.makedirs(i)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> has_dirs:</span><br><span class="line">        i = i.replace(source_dirs, target_dirs2)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(i):</span><br><span class="line">            os.makedirs(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 缩放</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scale</span>(<span class="params">i</span>):</span></span><br><span class="line">    img = Image.<span class="built_in">open</span>(<span class="string">&#x27;&#x27;</span> + i)</span><br><span class="line">    <span class="comment"># 目标地址</span></span><br><span class="line">    bb = i.replace(source_dirs, target_dirs2)</span><br><span class="line">    bb = bb.replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    width, height = img.size</span><br><span class="line">    w_s = <span class="built_in">int</span>(width / (width / <span class="number">800</span>))  <span class="comment"># 长宽缩小两倍</span></span><br><span class="line">    h_s = <span class="built_in">int</span>(height / (height / <span class="number">400</span>))  <span class="comment"># 长宽缩小两倍</span></span><br><span class="line">    img = img.resize((w_s, h_s), Image.ANTIALIAS)</span><br><span class="line">    blank = (w_s - h_s) / <span class="number">2</span></span><br><span class="line">    <span class="comment"># region = img.crop((0, -blank, w_s, w_s - blank))</span></span><br><span class="line">    region = img.crop((<span class="number">0</span>, <span class="number">0</span>, w_s, h_s))</span><br><span class="line">    region.save(bb)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 裁剪</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resize</span>(<span class="params">i</span>):</span></span><br><span class="line">    img = Image.<span class="built_in">open</span>(<span class="string">&#x27;&#x27;</span> + i)</span><br><span class="line">    <span class="comment"># 目标地址</span></span><br><span class="line">    bb = i.replace(source_dirs, target_dirs)</span><br><span class="line">    bb = bb.replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    width, height = img.size</span><br><span class="line">    he = (width * <span class="number">400</span>) / <span class="number">1920</span></span><br><span class="line">    wi = (height - he) / <span class="number">2</span></span><br><span class="line">    <span class="comment"># print(he)</span></span><br><span class="line">    <span class="comment"># print(width,height)</span></span><br><span class="line">    <span class="comment"># 前两个坐标点是左上角坐标</span></span><br><span class="line">    <span class="comment"># 后两个坐标点是右下角坐标</span></span><br><span class="line">    <span class="comment"># width在前， height在后</span></span><br><span class="line">    box = (<span class="number">0</span>, wi, width, he + wi)</span><br><span class="line">    region = img.crop(box)</span><br><span class="line">    <span class="comment"># cc=bb.replace(&#x27;\\&#x27;,&#x27;&#x27;)</span></span><br><span class="line">    <span class="comment"># if os.path.exists(cc):</span></span><br><span class="line">    <span class="comment"># os.makedirs(cc)</span></span><br><span class="line">    <span class="comment"># 因为保存裁剪后的文件要求文件夹要存在故单独处理</span></span><br><span class="line">    region.save(bb)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拼接为链接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">join_url</span>(<span class="params">utl_txt, lst</span>):</span></span><br><span class="line">    file = utl_txt</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> lst:</span><br><span class="line">        i = i.replace(<span class="string">&#x27;./&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        i = i.replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        i1 = i.replace(<span class="string">&#x27;max&#x27;</span>, <span class="string">&#x27;mid&#x27;</span>)</span><br><span class="line">        i2 = i.replace(<span class="string">&#x27;max&#x27;</span>, <span class="string">&#x27;min&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file, <span class="string">&#x27;a+&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(file, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f1:</span><br><span class="line">                url = <span class="string">&#x27;https://cdn.jsdelivr.net/gh/runrab/cdn2@master/img&#x27;</span> + i + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> f1.readlines():</span><br><span class="line">                    f.write(url)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;mid.txt&quot;</span>, <span class="string">&#x27;a+&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;mid.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f1:</span><br><span class="line">                url = <span class="string">&#x27;https://cdn.jsdelivr.net/gh/runrab/cdn2@master/img&#x27;</span> + i2 + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> f1.readlines():</span><br><span class="line">                    f.write(url)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;min.txt&quot;</span>, <span class="string">&#x27;a+&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&quot;min.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f1:</span><br><span class="line">                url = <span class="string">&#x27;https://cdn.jsdelivr.net/gh/runrab/cdn2@master/img&#x27;</span> + i2 + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> f1.readlines():</span><br><span class="line">                    f.write(url)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">declImg</span>():</span></span><br><span class="line">    a = getListFiles(source_dirs)</span><br><span class="line">    b = getListFiles(target_dirs)</span><br><span class="line">    c = getListFiles(target_dirs2)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> b:</span><br><span class="line">            b.append(i)</span><br><span class="line">            resize(i)</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> c:</span><br><span class="line">            c.append(i)</span><br><span class="line">            scale(i)</span><br><span class="line">    join_url(<span class="string">r&quot;max.txt&quot;</span>, a)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">declImg()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">#导出requirements.txt</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>等待改动</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的网盘</title>
      <link href="/archives/855e324c.html"/>
      <url>/archives/855e324c.html</url>
      
        <content type="html"><![CDATA[<h1>基于：</h1><p><strong>onemanger +阿里云函数计算Fc</strong></p><h1>demo:</h1><h2 id="视频：">视频：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% dplayer &quot;url=https://pan.runrab.com/video/%E4%B9%A6%E8%AE%B0%E8%88%9E.mp4&quot; &quot;pic=https://xxxxxxx.jpg&quot; &quot;loop=yes&quot; &quot;theme=#FADFA3&quot; &quot;autoplay=false&quot; &quot;token=tokendemo&quot; %&#125;</span><br></pre></td></tr></table></figure><h3 id="dplayer使用hexo-tag-dplayer">dplayer使用hexo-tag-dplayer</h3><div id="dplayer2" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer2"),"theme":"#FADFA3","loop":true,"video":{"url":"https://pan.runrab.com/video/%E4%B9%A6%E8%AE%B0%E8%88%9E.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>网盘onedrive不再使用</p>]]></content>
      
      
      <categories>
          
          <category> me </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 我的网盘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的图床</title>
      <link href="/archives/2e4464e.html"/>
      <url>/archives/2e4464e.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="833b8712f1f27d9e28d4153fa860bebfe82b3393e5f4e114e86ad69a96fb8a4a">4630436162ade97ba2718b7d0c4b3b63501b8b0e90dd70c68cacef77fafaa69c052ad28fa69999513dbe0f84451681c16d6a85bb5807c2da7a62996bd1aaa94374bcbda7ac28c925cf6d68a4fabaaebdf23e45c5beb284480373a8b3191a11a49cbe0883733d74f150edb3742212856442382e5245742e81731d3c4062fbe66cc04a55193d76f93da9eeceb9c631d194db7b63a293b70154ddac76ae5d43e8f04489744bc7d37966ea6d0e0a3d99737d718e777b8cc685fa979debfcede4d06b99022cb8ccdb28369e40e27d8c7542953b1448bd292336948f8f4731b7e69be8c16cdf9aead254a15904e4aa514cbb832f2bb2e7ba07b4f07e8b3452b7668d90c69d9c4abe8fc6b4ced56a07632dfc85874b914e4618aabd9afd97465ea3267033bc6bdd525258318e8bfb52e5cc47a327b1f71b13dc69a4143892d7b5df07f0aa16d1ec88ca1faf2236e7f73f213293333d4d568b1cbd1d0625ac821c96cc53941bc8594a4dd9d1a69729fd4b2cb57ecd6300eb214af08c4f867a5e6909b830a869fc16760ea7ab2ff9be1924efe4ba2989585a81441bfadfa8dadf0cc6677c19fa116e494a530094d510ea8f87a417831b48a713ca4400a3b4ad53331879d34cdb8e9ef5bf0c0f007c7b91928ed70e52a3e6ffed837da0977a079bd512c3642d2e6f1a1935392111b07a00cadd453238f8741691a2c58d08ac064e7d2bda077cc44652914a6cc0ca1fc25198d49079c5d339423a180368bab6d82a6f5ba896c0fcc0493f103ef442a2e315b4ae38f74f7975b1afaf836b27534cea5ddb8b2e058c08881f697be337bbababa4f30e473cfee6f061901781fd09c4fc36349936a331fe471a7e7677ae762149083eaa835877aa554558df7e87dbd7210cca3054e98ac915cab5bd322f37eb4767a62992dec56b0650712a7fc34ab5c223f0780fc9a13441b3c14283bc42e2cb738f7ef653234da16ae1344d645f02ef0365dcda5bee980fd44b840a07d92022e7018c2ba604a0fb142961d1892f89b19687c81a51f53dde583860d089cccefe62f55c9f931daaa82f124b60d51862c4025f223dffda574b2c5143a2ec2e72dbc62e8bc73167efe106ef30d27afa0d06b8adad466257a1674a82d3e891d9e2d019599d7a021662cd10ad7377afbc13e7c7a0c148bf5a5c320b9682e613610f446277415622a07f14a7d470843c444a15f2e8b6a1a7e3eae21975d6a60c4c749f518f5beb347676c4133167fc685418a6a6f418c3df6fe29c8dcb14c817740d8216ecba7466865644ac93ff1cee6f886ef101d78558d90a48f586337c1e1a48dd92456b39dbfc576a15985e0eaf01401fc9fdaa7c2b5ee7050349cb65da621ce993e73567f0b7a4873193b9c327441abe93062f4c95579694c2a5d286a585ad23257cafef175b34a2005adcfa4714fb101e4d0fb4b26360b30dcc306bcb49bf289bc93e0d54333c494b7632db0f7988a6356b8d867217030d4e522b9d4b2585312ee37085cf886589178abb1a8b0e61b6aafde16446f5581e2c0a34bf0e7927acb052df6db5fe4270747d791b1184b4ca20c75189f45bed4dbdd8d9714882ff65e341d8ca5365cc33cb099e42203e27f175823c86ae153f1005107e981cf3976057bc250bbc11620eddbc22aee7312dfedf5c3e7e71f2befd54ec5ca0bdf673be94e683630f715767d2577663b328e760a466a32f4e2c45e9868f3ca38b44ee8d5d6d970d1c24866870ea8ab08a48ee8b2fdd442047ca12aef1cf79e0851e000571abf4e5226e2b547197f2b91ef95ec6924cb513f92cffb3e14a32639934cc232c82c0398274768baea0e6b1b91f586ddea1960b93b00fd565c91a97d09d02301e8cc509af9e0e4229c4b7c5fc1aec48582b748d01f6f9cad4a9064ada112e910f6b418af7f0ca720165e0f8c63fd0c615d7af4648a68d93cf91ac0f98ef0277ffbe941590ceb6eb2ecc63f654cdf5091dff3da09c3a1948ce259db4b809296c656e6a505c4e7a8e7bae2e28bf47fced00a58c3f4786c287d2d90f2a351b0319824d136016b703beba00a281fb72608149e216b04490ef79a17c5df099ebf93c0210a65107e1a5ed54af50f897342efc374a865561ae01049ab6a765eea213fc5e16a0dbe1c99620e53bb8fbd5d1f46f7097db2e0c27548c2687d78cc92656b7876fadb6695f1d66bdf696ee19c644c2c5a5113def324d2a4d0c85569cab00abf11c0b1573e1343269685e8702a2d6086751e4b52022a9baed1a7a504cbe501c3da305b41d0b01647cf36fee3e8733c2eb83256cf04295ab282487a63616bb14723b6da31f1e41d22a7bdfe78e8adf57a0662b7f3935336284839dc0c1628d51e551cf279b75b32852edc634c1701dfcd7f081c9e4355d722d887d01aba2e982040f2edc686fcc3573a508687a42c94a7d693e599e7feb0ab345766e3b0f1cdccced1cbf709069ed87291644053b55b1485c1888bc6b2da575fba4789b957e514b326213b40d99d41c1f2dd7311448c693c3a01cdd83d5b474fa0d310021cf28424a7d80868d6bdd57d679615520ea26f1dead553ed2b966265b09e99e30e2fbf7002a72d557064e320468837070b65e9489fc6ec73e7f01eaa1c7556f95c6e3deaf544907b80a8239dbc9366201b3cfa6c3d5955e8d78f2d5f1581316afb5b9d5e1c803bcf11e609fdcd4f95f2d018e5273cb5ac6bab9934437a3837d887319e138c7c8bc8aa5e1bd72a0bc7ae7e200873b2d846019615d377f2be3abae179c0fdf1ff6c207b669883589251182e2384ae1f909b1a8bb0bcca2d77d9d51d8dd00194352f0095357e5fe3b82a0a1bc3db64c1bd77ed1376b0808145b2361e276a71b182b9b61cb7d053259d928efa91df4641c1c3ae32038323e1e734d74d311dbd9448e2b62be0e843abd42daa12555276fb6ab32aa6111412dc389f212a68032ebaa15abb770905cad6f6b17e7765e9a0dd15caa0ce16e201f655a1f72a3438ffbe1c94c95ea91b75ad9a3330925559ef91c567c4adefa7373eaa4f1af1050d354b007e5be9ef8e1dba58f4b8f5cd52d675a4a9b99eae0d5a816f4ae8532b61c97191ef3a2c3faf1643d78b947ef6756117a3e02991a97b6d78e3bc2d3d6ad51bae742e60fbfd19286482d248041e2487c715eef0c86d5cbdd3ac414c5bf19e2feafffc96ce04130452259c0d61691ea0ea53b63bb737f4a0178bc2db3e17867ce470c356a185fd07552e797b0f19325975ec00c314206a28cadae591b6ec83200a5f617e7de89694aaf751f875ad1ff1b29169dd8c844c83fd069046503f15833f76418bdf4ad0849071986dab76c061bba4f5abd12a9027e6e521ce4439d8bfa0bf813b142292e885a66936a091b03e734a6c1b76f25478e99e5cabb462ed4609d621a308707921c52e3f29bf89263bc4e0206988e55b22f31401ecf5594a882a213ac2a5c2ed3d16277c007c9c77b463206c8b9f20d52e752fa4c71685f5425b0dd1115781774fbc5657e6a9e85eed1052b0fe8539a4eb3c3242b6b7a30d5ee1bede3879144832c510b18375a2e18324072f0f03d0309c210aa85f7ec96bd555ec89f20454c7ae4961888ee44449eee60ec</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> me </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图床 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pixiv代理</title>
      <link href="/archives/df1b4fb9.html"/>
      <url>/archives/df1b4fb9.html</url>
      
        <content type="html"><![CDATA[<h1>pixiv代理</h1><h2 id="cloudfare-代理">cloudfare 代理</h2><p>地址：https://<strong><a href="http://i.pximg.net">i.pximg.net</a></strong>替换为 <a href="https://pixiv.runrab.workers.dev">https://pixiv.runrab.workers.dev</a></p><p>例如 https://<strong><a href="http://i.pximg.net">i.pximg.net</a></strong>/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg</p><p>换成</p><p><img src="https://pixiv.runrab.workers.dev/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg" alt="demo"></p><p>也可以用 <a href="https://i.pixiv.cat/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg">https://i.pixiv.cat/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg</a></p><p>来自：<a href="https://pixiv.cat/reverseproxy.html">https://pixiv.cat/reverseproxy.html</a></p><p>nginx 代理：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">proxy_cache_path /path/to/cache levels=1:2 keys_zone=pximg:10m max_size=10g inactive=7d use_temp_path=off;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl http2;</span><br><span class="line"></span><br><span class="line">    ssl_certificate /path/to/ssl_certificate.crt;</span><br><span class="line">    ssl_certificate_key /path/to/ssl_certificate.key;</span><br><span class="line"></span><br><span class="line">    server_name i.pixiv.cat;</span><br><span class="line">    access_log off;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">    proxy_cache pximg;</span><br><span class="line">    proxy_pass https://i.pximg.net;</span><br><span class="line">    proxy_cache_revalidate on;</span><br><span class="line">    proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;</span><br><span class="line">    proxy_cache_lock on;</span><br><span class="line">    add_header X-Cache-Status $upstream_cache_status;</span><br><span class="line">    proxy_set_header Host i.pximg.net;</span><br><span class="line">    proxy_set_header Referer &quot;https://www.pixiv.net/&quot;;</span><br><span class="line"></span><br><span class="line">    proxy_cache_valid 200 7d;</span><br><span class="line">    proxy_cache_valid 404 5m;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>cf代理设置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(&quot;fetch&quot;, event =&gt; &#123;</span><br><span class="line">  let url = new URL(event.request.url);</span><br><span class="line">  url.hostname = &quot;i.pximg.net&quot;;</span><br><span class="line"></span><br><span class="line">  let request = new Request(url, event.request);</span><br><span class="line">  event.respondWith(</span><br><span class="line">    fetch(request, &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        &#x27;Referer&#x27;: &#x27;https://www.pixiv.net/&#x27;,</span><br><span class="line">        &#x27;User-Agent&#x27;: &#x27;Cloudflare Workers&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> pixiv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pixiv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly官方安装文档和魔改教程</title>
      <link href="/archives/b45332b4.html"/>
      <url>/archives/b45332b4.html</url>
      
        <content type="html"><![CDATA[<h1>魔改教程</h1><h3 id="基于Butterfly主题的分类磁贴（未用）">基于Butterfly主题的分类磁贴（未用）</h3><p><a href="https://akilar.top/posts/a9131002/">https://akilar.top/posts/a9131002/</a></p><h3 id="给博客添加B站同款动态banner（放弃版本兼容性不好）">给博客添加B站同款动态banner（放弃版本兼容性不好）</h3><p><a href="https://akilar.top/posts/780a2cea/">https://akilar.top/posts/780a2cea/</a></p><h3 id="基于swiper的首页置顶轮播图-hexo-butterfly-swiper">基于swiper的首页置顶轮播图 hexo-butterfly-swiper</h3><p><a href="https://akilar.top/posts/8e1264d1/">https://akilar.top/posts/8e1264d1/</a></p><h2 id="乐特无源码修改-（使用）">乐特无源码修改 （使用）</h2><p><a href="https://butterfly.lete114.top/article/Butterfly-config.html">https://butterfly.lete114.top/article/Butterfly-config.html</a></p><h3 id="Hexo引入阿里矢量图标库（未做）">Hexo引入阿里矢量图标库（未做）</h3><p><a href="https://akilar.top/posts/d2ebecef/">https://akilar.top/posts/d2ebecef/</a></p><h3 id="hls视频流">hls视频流</h3><p><a href="https://butterfly.lete114.top/article/jsdelivr-video.html">https://butterfly.lete114.top/article/jsdelivr-video.html</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;video id=&quot;video&quot; preload muted loop autoplay style=&quot;height: 100%;width: 100%;object-fit: cover;&quot;&gt;</span><br><span class="line">&lt;/video&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var video = document.getElementById(&#x27;video&#x27;);</span><br><span class="line">  var videoSrc = &#x27;https://cdn.jsdelivr.net/gh/lete114/CDN2/video/4.m3u8&#x27;;</span><br><span class="line">  if (Hls.isSupported()) &#123;</span><br><span class="line">    var hls = new Hls();</span><br><span class="line">    hls.loadSource(videoSrc);</span><br><span class="line">    hls.attachMedia(video);</span><br><span class="line">    hls.on(Hls.Events.MANIFEST_PARSED, function() &#123;</span><br><span class="line">      video.play();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><script src="https://cdn.jsdelivr.net/npm/hls.js"></script><video id="video" preload muted loop autoplay style="height: 100%;width: 100%;object-fit: cover;"></video><script>  var video = document.getElementById('video');  var videoSrc = 'https://cdn.jsdelivr.net/gh/lete114/CDN2/video/4.m3u8';  if (Hls.isSupported()) {    var hls = new Hls();    hls.loadSource(videoSrc);    hls.attachMedia(video);    hls.on(Hls.Events.MANIFEST_PARSED, function() {      video.play();    });  }</script><h1>hexo 插件</h1><h4 id="官方文档链接：">官方文档链接：</h4><p><a href="https://butterfly.js.org/posts/21cfbf15/#%E5%AE%89%E8%A3%9D">https://butterfly.js.org/posts/21cfbf15/#安裝</a></p><h4 id="魔改教程链接：">魔改教程链接：</h4><p><a href="https://www.antmoe.com/posts/a811d614/index.html">https://www.antmoe.com/posts/a811d614/index.html</a></p><h4 id="live2d看板娘：">live2d看板娘：</h4><p><a href="https://blog.csdn.net/qq_36239569/article/details/104104894">https://blog.csdn.net/qq_36239569/article/details/104104894</a></p><h4 id="注意问题">注意问题</h4><p>1.安装douban(豆瓣)插件的话，hexo d 不能用来发布，应该用hexo deploy(deploy 和douban重复了)<br>2.常见hexo s报错很可能是yml语法不和规矩。可以通过YAML，YML在线编辑（校验）器 <a href="http://www.bejson.com/validators/yaml_editor/">http://www.bejson.com/validators/yaml_editor/</a> 检查一下<br>3。导航栏图标显示不全 对于Font Awesome 可以搜索inject: 在bottom: 下添加<br>Font Awesome图标库引入js</p><pre><code>- &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css&quot;&gt;</code></pre><p>原因：fa前缀在5.x版本中已弃用。新的默认设置是实心的fas样式和品牌的fab样式。<br>官网：<a href="https://fontawesome.dashgame.com/">https://fontawesome.dashgame.com/</a></p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python读取目录下的所有文件</title>
      <link href="/archives/a7831c90.html"/>
      <url>/archives/a7831c90.html</url>
      
        <content type="html"><![CDATA[<h1>Python读取目录下的所有文件</h1><h2 id="代码：">代码：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">path = &quot;D:/DATA&quot; #文件夹目录</span><br><span class="line">files= os.listdir(path) #得到文件夹下的所有文件名称</span><br><span class="line">s = []</span><br><span class="line">for file in files: #遍历文件夹</span><br><span class="line">    if not os.path.isdir(file): #判断是否是文件夹，不是文件夹才打开</span><br><span class="line">        f = open(path+&quot;/&quot;+file); #打开文件</span><br><span class="line">        iter_f = iter(f); #创建迭代器</span><br><span class="line">        str = &quot;&quot;</span><br><span class="line">        for line in iter_f: #遍历文件，一行行遍历，读取文本</span><br><span class="line">            str = str + line</span><br><span class="line">        s.append(str) #每个文件的文本存到list中</span><br><span class="line">print(s) #打印结果</span><br></pre></td></tr></table></figure><p>]()</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/archives/4a17b156.html"/>
      <url>/archives/4a17b156.html</url>
      
        <content type="html"><![CDATA[<h1>一 ：关于网站</h1><h1>二：我搭建的</h1><h2 id="github代理">github代理</h2><p>地址：<a href="https://gh.runrab.workers.dev">https://gh.runrab.workers.dev</a></p><h4 id="使用方法：git-或者直接网页下载">使用方法：git 或者直接网页下载</h4><p>git clone <a href="https://gh.runrab.workers.dev/%E4%BD%A0%E8%A6%81%E5%85%8B%E9%9A%86%E7%9A%84%E4%BB%93%E5%BA%93%E5%90%8D%E7%A7%B0%E4%B8%8D%E5%8A%A0.git">https://gh.runrab.workers.dev/你要克隆的仓库名称不加.git</a></p><p>demo :  <a href="https://github.com/ismech/python-get-images-url.git">https://github.com/ismech/python-get-images-url.git</a></p><p>git clone <a href="https://gh.runrab.workers.dev/https://github.com/ismech/python-get-images-url">https://gh.runrab.workers.dev/https://github.com/ismech/python-get-images-url</a></p><h2 id="1-onedrive网盘">1.onedrive网盘</h2><h4 id="推荐：-https-pan-runrab-com-基于阿里云函数计算FC">推荐： <a href="https://pan.runrab.com/">https://pan.runrab.com/</a>  基于阿里云函数计算FC</h4><h4 id="不推荐：">不推荐：</h4><p>直连地址：<a href="https://runrab.herokuapp.com">https://runrab.herokuapp.com</a></p><p>cf代理地址：<a href="https://pan.runrab.workers.dev">https://pan.runrab.workers.dev</a></p><h3 id="demo">demo</h3><p>图片：<a href="https://pan.runrab.com/images/meizi/btstu/1.jpg">https://pan.runrab.com/images/meizi/btstu/1.jpg</a></p><p><img src="https://pan.runrab.com/images/meizi/btstu/1.jpg" alt=""></p><p>视频 <a href="https://pan.runrab.com/video/%E5%A4%A9%E6%B0%94%E4%B9%8B%E5%AD%90.mp4">https://pan.runrab.com/video/天气之子.mp4</a></p><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"video":{"url":"https://pan.runrab.com/video/%E5%A4%A9%E6%B0%94%E4%B9%8B%E5%AD%90.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> <h2 id="2：api">2：api</h2><h4 id="1-图片api">1.图片api</h4><p>地址： <a href="https://api.runrab.com">https://api.runrab.com</a></p><p><a href="https://api-runrab.vercel.app">https://api-runrab.vercel.app</a></p><p>demo:  <a href="https://api.runrab.com/img/pic">https://api.runrab.com/img/pic</a></p><p>或者 <a href="https://api.runrab.com/img/pic">https://api.runrab.com/img/pic</a></p><p>使用 sqlite3存储数据 内存模式比较复杂,暂时移除，暂时不将不用将文件加载到内存中</p><p>demo: <a href="https://api-runrab.vercel.app/img/pic">https://api-runrab.vercel.app/img/pic</a></p><p>json格式： <a href="https://api.runrab.com/img/json">https://api.runrab.com/img/json</a></p><h3 id="3图床">3图床</h3><p>地址： <a href="https://pic.runrab.com/">https://pic.runrab.com/</a></p><p>demo:  <a href="https://cdn.jsdelivr.net/gh/hs-p/pic@main/003.35h6t10ff980.jpg">https://cdn.jsdelivr.net/gh/hs-p/pic@main/003.35h6t10ff980.jpg</a></p><p><img src="https://cdn.jsdelivr.net/gh/hs-p/pic@main/003.35h6t10ff980.jpg" alt=""></p><p>vercel代理 <a href="https://img-plus.vercel.app/003.35h6t10ff980.jpg">https://img-plus.vercel.app/003.35h6t10ff980.jpg</a></p><p><img src="https://img-plus.vercel.app/003.35h6t10ff980.jpg" alt=""></p><h2 id="4：pixiv代理">4：pixiv代理</h2><h3 id="cloudfare-代理">cloudfare 代理</h3><p>地址：https://<strong><a href="http://i.pximg.net">i.pximg.net</a></strong>替换为 <a href="https://pixiv.runrab.workers.dev">https://pixiv.runrab.workers.dev</a></p><p>例如 https://<strong><a href="http://i.pximg.net">i.pximg.net</a></strong>/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg</p><p>换成  <a href="https://pixiv.runrab.workers.dev/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg">https://pixiv.runrab.workers.dev/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg</a></p><p><img src="https://pixiv.runrab.workers.dev/img-original/img/2020/06/05/00/00/07/82092623_p0.jpg" alt=""></p><h3 id="5视频播放器">5视频播放器</h3><p><a href="https://v.mikuo.top/bliplayer/">https://v.mikuo.top/bliplayer/</a></p><p>demo: 视频来自抖音 @四宫辉夜</p><div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer1"),"theme":"#FADFA3","loop":true,"video":{"url":"https://pan.runrab.com/e5/video/douyin/%E7%A2%A7%E8%93%9D%E6%A1%A3%E6%A1%88.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> <p>demo: <a href="https://v.mikuo.top/bliplayer/?url=https%3A%2F%2Fpan.runrab.com%2Fvideo%2F%25E5%25A4%25A9%25E6%25B0%2594%25E4%25B9%258B%25E5%25AD%2590.mp4">demo</a></p><h3 id="6壁纸">6壁纸</h3><p>demo：</p><p><a href="https://v.mikuo.top/wallpaper">点我前往</a><br>###7 整合在线编辑文章<br>前往: <a href="https://hexoplusplus.js.org/">hexoplusplus</a><br>###重新开始，并本地化</p>]]></content>
      
      
      <categories>
          
          <category> me </category>
          
      </categories>
      
      
        <tags>
            
            <tag> me </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
